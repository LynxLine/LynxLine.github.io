<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <style>
        :root {
            --accent-color: #FF4D4D;
        }
    </style>

    
    
    
    
    
    

    
    <title>Lab 1 Compiler</title>
    <meta name="description" content="">
    <meta name="keywords" content=''>

    <meta property="og:url" content="https://lynxline.com/posts/lab-1-compiler/">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Lab 1 Compiler">
    <meta property="og:description" content="">
    <meta property="og:image" content="https://lynxline.com/images/lynx.jpg">
    <meta property="og:image:secure_url" content="https://lynxline.com/images/lynx.jpg">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Lab 1 Compiler">
    <meta name="twitter:description" content="">
    <meta property="twitter:domain" content="https://lynxline.com/posts/lab-1-compiler/">
    <meta property="twitter:url" content="https://lynxline.com/posts/lab-1-compiler/">
    <meta name="twitter:image" content="https://lynxline.com/images/lynx.jpg">

    
    <link rel="canonical" href="https://lynxline.com/posts/lab-1-compiler/" />

    
    <link rel="stylesheet" type="text/css" href="/css/normalize.min.css" media="print">

    
    <link rel="stylesheet" type="text/css" href="/css/main.min.css">

    
    <link id="dark-theme" rel="stylesheet" href="/css/dark.min.css">

    
    <script src="/js/bundle.min.224c8e70fed292d18d7d9ae1b36797c99144e0be1117e2ea2c428379c8496551.js" integrity="sha256-IkyOcP7SktGNfZrhs2eXyZFE4L4RF&#43;LqLEKDechJZVE="></script>

    
    
</head>
<body>
        <script type="text/javascript">
            
            setThemeByUserPref();
        </script><header class="header">
    <nav class="header-nav">

        
        <div class="avatar">
            <a href="https://lynxline.com/">
                <img src='/images/lynx.jpg' alt="avatar" />
            </a>
        </div>
        

        <div class="nav-title">
            <a class="nav-brand" href="https://lynxline.com/">LynxLine</a>
        </div>

        <div class="nav-links">
            
            <div class="nav-link">
                <a href="https://lynxline.com/services/"><span data-feather='zap'></span> Services </a>
            </div>
            
            <div class="nav-link">
                <a href="https://lynxline.com/posts/"><span data-feather='layers'></span> Posts </a>
            </div>
            
            <div class="nav-link">
                <a href="https://lynxline.com/tags/"><span data-feather='tag'></span> Tags </a>
            </div>
            
            <div class="nav-link">
                <a href="https://lynxline.com/contact/"><span data-feather='mail'></span> Contact </a>
            </div>
            
            <div class="nav-link">
                <a href="https://github.com"><span data-feather='github'></span>  </a>
            </div>
            

            <span class="nav-icons-divider"></span>
            <div class="nav-link dark-theme-toggle">
                <span id="dark-theme-toggle-screen-reader-target" class="sr-only"></span>
                <a>
                    <span id="theme-toggle-icon" data-feather="moon"></span>
                </a>
            </div>

            <div class="nav-link" id="hamburger-menu-toggle">
                <span id="hamburger-menu-toggle-screen-reader-target" class="sr-only">menu</span>
                <a>
                    <span data-feather="menu"></span>
                </a>
            </div>

            
            <ul class="nav-hamburger-list visibility-hidden">
                
                <li class="nav-item">
                    <a href="https://lynxline.com/services/"><span data-feather='zap'></span> Services </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://lynxline.com/posts/"><span data-feather='layers'></span> Posts </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://lynxline.com/tags/"><span data-feather='tag'></span> Tags </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://lynxline.com/contact/"><span data-feather='mail'></span> Contact </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://github.com"><span data-feather='github'></span>  </a>
                </li>
                
                <li class="nav-item dark-theme-toggle">
                    <span id="dark-theme-toggle-screen-reader-target" class="sr-only">theme</span>
                    <a>
                        <span id="theme-toggle-icon" data-feather="moon"></span>
                    </a>
                </li>
            </ul>

        </div>
    </nav>
</header>
<main id="content">
    <div class="post container">
    <div class="post-header-section">
        <h1>Lab 1 Compiler</h1>
        <small role="doc-subtitle"></small>
        <p class="post-date">November 16, 2012
        
        </p>

        <ul class="post-tags">
        
        </ul>
    </div>

    <div class="post-content">
        <p>
            <p>Let’s start with tools that we need to just build the OS for ARM. First clone official inferno os repository
from google code repository:</p>
<pre tabindex="0"><code>##hg#clone#https://code.google.com/p/inferno6os/
</code></pre><p>What we need to move further? We need the ARM cross compiler, linker, etc. For this, let’s just compile
inferno targeting mac as host (we are on mac now, so we will get hosted inferno for mac as result):</p>
<pre tabindex="0"><code>01 ##cd#inferno6os/
02 ##INF_ROOT=`pwd`#perl#6i#6pe#&#39;s/^ROOT=.*/ROOT=$ENV{INF_ROOT}/m&#39;#mkconfig 03 ##perl#6i#6pe#&#39;s/^SYSHOST=.*/SYSHOST=MacOSX/m&#39;#mkconfig
04 ##perl#6i#6pe#&#39;s/^OBJTYPE=.*/OBJTYPE=386/m&#39;#mkconfig
05 ##sh#makemk.sh
06 ##PATH=`pwd`/MacOSX/386/bin:$PATH#mk#nuke
07 ##PATH=`pwd`/MacOSX/386/bin:$PATH#mk#install
08 ...#waiting#just#few#minutes#...
09 ##ls#MacOSX/386/bin/
10 0a#########2l#########8l#########iar########ksize######ms2########tc
11 0c#########5a#########acid#######idea#######kstrip#####ndate######va
12 0l#########5c#########asm########inm########limbo######qa#########vc
13 1a#########5coff######c2l########iyacc######md5sum#####qc#########vl
14 1c#########5cv########data2c#####ka#########mk#########ql
15 1l#########5l#########data2s#####kc#########mk.save####sqz
16 2a#########8a#########emu########kl#########mkext######srclist
17 2c#########8c#########ftl########kprof######mkppcimage#styxtest
18 #
</code></pre><p>Yes! Now we have all needed cross-platform tools for building Inferno OS for ARM, see 5c – C compiler, 5a – ARM assembler, 5l – ARM linker.
Let’s check ARM asm generated:</p>
<pre tabindex="0"><code>1 ##export#PATH=`pwd`/MacOSX/386/bin:$PATH
2 ##echo#&#34;int#main()#{#return#123;#}&#34;#&gt;tmp.c#&amp;&amp;#5c#6S#tmp.c#&amp;&amp;#rm#tmp.c 3 ####TEXT####main+0(SB),0,$0
4 ####MOVW####$123,R0 5 ####RET#,
6 ####RET#,
7 ####END#,
</code></pre>
        </p>
        
    </div>

    <div class="prev-next">
        
    </div>

    
    
    
</div>



    

        </main><footer class="footer">
    
    

    
    <span>
        Made using <a target="_blank" href="https://gohugo.io/">HUGO</a>
    </span>
</footer>
</body>
</html>
